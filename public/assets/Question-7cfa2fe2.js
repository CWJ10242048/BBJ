import{a as G}from"./axios-3a665b0f.js";import{k as H,r as w,b as n,o as m,c as g,d as i,f as e,w as t,h as d,q as x,s as y,F as j,e as h,t as s,E as k}from"./index-8f7409db.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const K={class:"questiongen-container"},W={class:"type-counts"},X={class:"button-group"},Y={class:"preview-content"},Z={key:0},$={key:1,class:"desc-pre"},ee=H({__name:"Question",setup(le){const q=[{label:"选择题",value:"选择题"},{label:"填空题",value:"填空题"},{label:"简答题",value:"简答题"},{label:"编程题",value:"编程题"},{label:"判断题",value:"判断题"},{label:"综合题",value:"综合题"},{label:"其他",value:"其他"}],c=w(),C=w(!1),V=w(!1),a=w({mode:"单题",difficulty:3,type:"",major:"",knowledge:"",typeCounts:{选择题:0,填空题:0,简答题:0,编程题:0,判断题:0,综合题:0,其他:0},lang:"中文",explain:!0,fileList:[],fileDesc:"",custom:""}),R={mode:[{required:!0,message:"请选择出题模式",trigger:"change"}],difficulty:[{required:!0,message:"请选择题目难度",trigger:"change"}],type:[{required:!0,message:"请选择题目类型",trigger:"change",required:()=>a.value.mode==="单题"}],major:[{required:!0,message:"请选择专业",trigger:"change"}],knowledge:[{required:!0,message:"请输入知识点",trigger:"blur"}],lang:[{required:!0,message:"请选择题目语言",trigger:"change"}]},D=(v,l)=>{l==="file"&&(a.value.fileList=v.fileList)},B=async()=>{if(c.value)try{await c.value.validate(),k.success("保存成功")}catch{k.error("请填写完整信息")}},E=()=>{C.value=!0},F=async()=>{V.value=!0;try{await new Promise(r=>setTimeout(r,2e3));const v=await G.get("/api/export/question",{responseType:"blob"}),l=new Blob([v.data],{type:v.headers["content-type"]}),_=window.URL.createObjectURL(l),f=document.createElement("a");f.href=_,f.download="机器学习习题整卷.docx",document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(_),k.success("导出成功")}catch{k.error("导出失败")}finally{V.value=!1}},N=()=>{c.value&&(c.value.resetFields(),a.value={mode:"单题",difficulty:3,type:"",major:"",knowledge:"",typeCounts:{选择题:0,填空题:0,简答题:0,编程题:0,判断题:0,综合题:0,其他:0},lang:"中文",explain:!0,fileList:[],fileDesc:"",custom:""})};return(v,l)=>{const _=n("el-radio"),f=n("el-radio-group"),r=n("el-form-item"),Q=n("el-rate"),u=n("el-option"),U=n("el-select"),T=n("el-input-number"),L=n("el-input"),z=n("el-switch"),b=n("el-button"),O=n("el-upload"),P=n("el-form"),S=n("el-card"),p=n("el-descriptions-item"),I=n("el-descriptions"),M=n("el-dialog");return m(),g("div",K,[l[18]||(l[18]=i("h2",null,"智能出题",-1)),e(S,{class:"box-card"},{header:t(()=>l[10]||(l[10]=[i("div",{class:"card-header"},[i("span",null,"出题信息")],-1)])),default:t(()=>[e(P,{model:a.value,rules:R,ref_key:"formRef",ref:c,"label-width":"120px"},{default:t(()=>[e(r,{label:"出题模式",prop:"mode"},{default:t(()=>[e(f,{modelValue:a.value.mode,"onUpdate:modelValue":l[0]||(l[0]=o=>a.value.mode=o)},{default:t(()=>[e(_,{label:"单题"},{default:t(()=>l[11]||(l[11]=[d("单题")])),_:1}),e(_,{label:"整卷"},{default:t(()=>l[12]||(l[12]=[d("整卷")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"题目难度",prop:"difficulty"},{default:t(()=>[e(Q,{modelValue:a.value.difficulty,"onUpdate:modelValue":l[1]||(l[1]=o=>a.value.difficulty=o),max:5},null,8,["modelValue"])]),_:1}),a.value.mode==="单题"?(m(),x(r,{key:0,label:"题目类型",prop:"type"},{default:t(()=>[e(U,{modelValue:a.value.type,"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.type=o),placeholder:"请选择题目类型"},{default:t(()=>[e(u,{label:"选择题",value:"选择题"}),e(u,{label:"填空题",value:"填空题"}),e(u,{label:"简答题",value:"简答题"}),e(u,{label:"编程题",value:"编程题"}),e(u,{label:"判断题",value:"判断题"}),e(u,{label:"综合题",value:"综合题"}),e(u,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})):y("",!0),a.value.mode==="整卷"?(m(),x(r,{key:1,label:"题型分配"},{default:t(()=>[i("div",W,[(m(),g(j,null,h(q,o=>i("div",{key:o.value,class:"type-count-item"},[i("span",null,s(o.label),1),e(T,{modelValue:a.value.typeCounts[o.value],"onUpdate:modelValue":A=>a.value.typeCounts[o.value]=A,min:0,max:100,size:"small",style:{width:"90px","margin-left":"8px"}},null,8,["modelValue","onUpdate:modelValue"])])),64))])]),_:1})):y("",!0),e(r,{label:"专业",prop:"major"},{default:t(()=>[e(U,{modelValue:a.value.major,"onUpdate:modelValue":l[3]||(l[3]=o=>a.value.major=o),placeholder:"请选择专业",filterable:"","allow-create":"","default-first-option":""},{default:t(()=>[e(u,{label:"计算机科学与技术",value:"计算机科学与技术"}),e(u,{label:"软件工程",value:"软件工程"}),e(u,{label:"数据科学与大数据技术",value:"数据科学与大数据技术"}),e(u,{label:"人工智能",value:"人工智能"}),e(u,{label:"网络工程",value:"网络工程"}),e(u,{label:"信息安全",value:"信息安全"}),e(u,{label:"物联网工程",value:"物联网工程"}),e(u,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"知识点",prop:"knowledge"},{default:t(()=>[e(L,{modelValue:a.value.knowledge,"onUpdate:modelValue":l[4]||(l[4]=o=>a.value.knowledge=o),placeholder:"请输入知识点，如：线性回归、排序算法等"},null,8,["modelValue"])]),_:1}),e(r,{label:"题目语言",prop:"lang"},{default:t(()=>[e(U,{modelValue:a.value.lang,"onUpdate:modelValue":l[5]||(l[5]=o=>a.value.lang=o),placeholder:"请选择题目语言"},{default:t(()=>[e(u,{label:"中文",value:"中文"}),e(u,{label:"英文",value:"英文"}),e(u,{label:"中英双语",value:"中英双语"})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"包含解析",prop:"explain"},{default:t(()=>[e(z,{modelValue:a.value.explain,"onUpdate:modelValue":l[6]||(l[6]=o=>a.value.explain=o),"active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),e(r,{label:"题库文件"},{default:t(()=>[e(O,{class:"upload-demo","auto-upload":!1,"show-file-list":!0,"on-change":o=>D(o,"file"),accept:".xlsx,.csv,.txt,.doc,.docx,.pdf"},{default:t(()=>[e(b,{size:"small",type:"primary"},{default:t(()=>l[13]||(l[13]=[d("上传文件")])),_:1})]),_:1},8,["on-change"]),e(L,{modelValue:a.value.fileDesc,"onUpdate:modelValue":l[7]||(l[7]=o=>a.value.fileDesc=o),type:"textarea",rows:2,placeholder:"或输入题库描述文本",style:{"margin-top":"8px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"自定义要求"},{default:t(()=>[e(L,{modelValue:a.value.custom,"onUpdate:modelValue":l[8]||(l[8]=o=>a.value.custom=o),type:"textarea",rows:2,placeholder:"可填写特殊要求、出题风格等"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),i("div",X,[e(b,{type:"primary",onClick:B},{default:t(()=>l[14]||(l[14]=[d("保存")])),_:1}),e(b,{type:"success",onClick:E},{default:t(()=>l[15]||(l[15]=[d("预览")])),_:1}),e(b,{type:"warning",loading:V.value,onClick:F},{default:t(()=>[d(s(V.value?"导出中...":"导出"),1)]),_:1},8,["loading"]),e(b,{onClick:N},{default:t(()=>l[16]||(l[16]=[d("重置")])),_:1})]),e(M,{modelValue:C.value,"onUpdate:modelValue":l[9]||(l[9]=o=>C.value=o),title:"智能出题预览",width:"60%","destroy-on-close":""},{default:t(()=>[i("div",Y,[l[17]||(l[17]=i("h2",null,"智能出题方案",-1)),e(I,{column:1,border:""},{default:t(()=>[e(p,{label:"出题模式"},{default:t(()=>[d(s(a.value.mode),1)]),_:1}),e(p,{label:"题目难度"},{default:t(()=>[d(s(a.value.difficulty)+" 星",1)]),_:1}),a.value.mode==="单题"?(m(),x(p,{key:0,label:"题目类型"},{default:t(()=>[d(s(a.value.type),1)]),_:1})):y("",!0),a.value.mode==="整卷"?(m(),x(p,{key:1,label:"题型分配"},{default:t(()=>[i("div",null,[a.value.typeCounts[v.item.value]>0?(m(),g(j,{key:0},h(q,o=>i("div",{key:o.value},s(o.label)+"："+s(a.value.typeCounts[o.value])+" 道 ",1)),64)):y("",!0)])]),_:1})):y("",!0),e(p,{label:"专业"},{default:t(()=>[d(s(a.value.major),1)]),_:1}),e(p,{label:"知识点"},{default:t(()=>[d(s(a.value.knowledge),1)]),_:1}),e(p,{label:"题目语言"},{default:t(()=>[d(s(a.value.lang),1)]),_:1}),e(p,{label:"包含解析"},{default:t(()=>[d(s(a.value.explain?"是":"否"),1)]),_:1}),e(p,{label:"题库文件"},{default:t(()=>[a.value.fileList.length?(m(),g("span",Z,"已上传文件")):(m(),g("pre",$,s(a.value.fileDesc),1))]),_:1}),e(p,{label:"自定义要求"},{default:t(()=>[d(s(a.value.custom),1)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}});const ue=J(ee,[["__scopeId","data-v-5925cb7d"]]);export{ue as default};
