import{i as L}from"./index-18acf776.js";import{k as G,r as p,ai as H,b as r,o as x,c as g,d as t,f as l,w as s,h as d,t as k,E as F,ad as J}from"./index-8f7409db.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const W={class:"knowtrack-container"},X={style:{"text-align":"center","margin-top":"16px"}},Y={class:"button-group"},Z={class:"preview-content"},ee={class:"desc-pre"},te={key:0},le={key:1},se={key:0},ae={key:1},oe={class:"chart-row"},ne={class:"chart-block"},ie={class:"chart-block"},re={class:"chart-row"},de={class:"chart-block"},ce={class:"desc-pre"},ue={class:"chart-block"},pe={class:"chart-row"},fe={class:"chart-block"},me={style:{"text-align":"right","margin-top":"8px"}},ve={class:"chart-block"},_e={class:"desc-pre"},he=G({__name:"KnowledgeTrack",setup(ye){const M=p(),w=p(!1),b=p(!1),R=p(),V=p(),O=p(),N=p(),C=p(!1),n=p({exerciseFileList:[],logFileList:[],desc:""}),U={},a=H({time:"",pathAdvice:"",teachAdvice:"",line:{x:[],series:[]},bar:{x:[],y:[]},flow:{nodes:[],links:[]},sankey:{nodes:[],links:[]},eval:[]}),T=["张宇轩","李佳悦","王诗涵","赵梓萱","刘逸凡","陈静怡","杨子墨","黄雨桐","吴梦琪","郑晨曦","孙浩然","周子涵","徐梓涵","马思远","高子涵","彭思源","宋子墨","杜思远","谢梓萱","邓子墨","冯思远","蒋梓萱","韩子墨","贾思远","廖梓萱","秦子墨","石思远","陶梓萱","魏子墨","尤思远"],K=["提升明显","进步较大","有进步","有提升","略有提升","需加强"],f=["线性回归","逻辑回归","决策树","支持向量机","神经网络","集成学习"],z=async()=>{if(!n.value.exerciseFileList.length||!n.value.logFileList.length){F.error("请上传习题和交互记录文件");return}b.value=!0,setTimeout(async()=>{b.value=!1;const h=new Date;a.time=h.toLocaleString(),a.line={x:["第1次","第2次","第3次","第4次","第5次"],series:f.map((o,c)=>{let y=40+c*5,v=[],_=y;for(let u=0;u<5;u++){let S=5+Math.floor(Math.random()*6)-Math.floor(Math.random()*4);_=Math.max(30,Math.min(100,_+S)),v.push(_)}return{name:o,data:v}})},a.bar={x:T.slice(0,10),y:Array.from({length:10},()=>Math.floor(Math.random()*21)+75)},a.pathAdvice='建议优先巩固"神经网络""支持向量机"等薄弱知识点，逐步提升"决策树""逻辑回归"等，最后攻克"线性回归"相关内容。',a.flow={nodes:f.map(o=>({name:o})),links:f.slice(0,-1).map((o,c)=>({source:o,target:f[c+1],value:1}))};const e=[{name:"初始状态"},...f.map(o=>({name:o}))],i=[];for(let o=0;o<f.length;o++)i.push({source:o===0?"初始状态":f[o-1],target:f[o],value:Math.max(1,10-o*2)});a.sankey={nodes:e,links:i},a.eval=T.map((o,c)=>{const y=Math.floor(Math.random()*21)+5,v=Math.floor(Math.random()*31)+70,_=K[(y+v+c)%K.length];return{name:o,improve:y,finalScore:v,effect:_}}),a.teachAdvice=`
1. 动态调整题目难度，针对薄弱知识点适当降低难度，提升学生信心。
2. 增加"集成学习"等新知识点的专项训练。
3. 推荐题目：线性回归预测实战、决策树剪枝应用、神经网络反向传播推导、集成学习方法对比等。
4. 推荐课程资源：《机器学习实战》《深度学习入门》《统计学习方法》《集成学习原理与应用》。
5. 鼓励小组合作与阶段性自测，及时反馈学习效果。
6. 采用分层教学、个性化推送习题、阶段性反馈等方式，动态调整教学内容，关注学生知识状态变化，提升整体学习效果。
7. 本次知识追踪分析采用 KANOptiKT 知识追踪模型，动态预测学生未来表现并为学习路径规划提供科学依据。`,await J(),E(),F.success("分析完成"),w.value=!0},4e3)};function E(){R.value&&L(R.value).setOption({tooltip:{trigger:"axis"},legend:{data:a.line.series.map(e=>e.name)},xAxis:{type:"category",data:a.line.x},yAxis:{type:"value",min:40},series:a.line.series.map(e=>({name:e.name,type:"line",data:e.data}))}),V.value&&L(V.value).setOption({tooltip:{},xAxis:{type:"category",data:a.bar.x},yAxis:{type:"value"},series:[{type:"bar",data:a.bar.y,itemStyle:{color:"#409EFF"}}]}),O.value&&L(O.value).setOption({tooltip:{},series:[{type:"sankey",data:a.flow.nodes,links:a.flow.links,lineStyle:{color:"gradient",curveness:.5},label:{show:!0}}]}),N.value&&L(N.value).setOption({tooltip:{},series:[{type:"sankey",data:a.sankey.nodes,links:a.sankey.links,lineStyle:{color:"gradient",curveness:.5},label:{show:!0}}]})}const B=async()=>{F.success("保存成功")},D=()=>{a.time||z(),w.value=!0},j=()=>{E()},I=()=>{F.success("导出成功")},P=()=>{M.value&&(M.value.resetFields(),n.value={exerciseFileList:[],logFileList:[],desc:""},Object.assign(a,{time:"",pathAdvice:"",teachAdvice:"",line:{x:[],series:[]},bar:{x:[],y:[]},flow:{nodes:[],links:[]},sankey:{nodes:[],links:[]},eval:[]}))};return(h,e)=>{const i=r("el-button"),o=r("el-upload"),c=r("el-form-item"),y=r("el-input"),v=r("el-form"),_=r("el-card"),u=r("el-descriptions-item"),S=r("el-descriptions"),A=r("el-table-column"),$=r("el-table"),q=r("el-dialog");return x(),g("div",W,[e[21]||(e[21]=t("h2",null,"知识追踪",-1)),l(_,{class:"box-card"},{header:s(()=>e[5]||(e[5]=[t("div",{class:"card-header"},[t("span",null,"数据上传与说明")],-1)])),default:s(()=>[l(v,{model:n.value,rules:U,ref_key:"formRef",ref:M,"label-width":"120px"},{default:s(()=>[l(c,{label:"习题文件"},{default:s(()=>[l(o,{class:"upload-demo","auto-upload":!1,"show-file-list":!0,"file-list":n.value.exerciseFileList,"onUpdate:fileList":e[0]||(e[0]=m=>n.value.exerciseFileList=m),accept:".xlsx,.csv,.doc,.docx,.pdf"},{default:s(()=>[l(i,{size:"small",type:"primary"},{default:s(()=>e[6]||(e[6]=[d("上传习题")])),_:1})]),_:1},8,["file-list"])]),_:1}),l(c,{label:"交互记录"},{default:s(()=>[l(o,{class:"upload-demo","auto-upload":!1,"show-file-list":!0,"file-list":n.value.logFileList,"onUpdate:fileList":e[1]||(e[1]=m=>n.value.logFileList=m),accept:".xlsx,.csv"},{default:s(()=>[l(i,{size:"small",type:"primary"},{default:s(()=>e[7]||(e[7]=[d("上传交互记录")])),_:1})]),_:1},8,["file-list"])]),_:1}),l(c,{label:"追踪说明"},{default:s(()=>[l(y,{modelValue:n.value.desc,"onUpdate:modelValue":e[2]||(e[2]=m=>n.value.desc=m),type:"textarea",rows:2,placeholder:"可填写追踪目的、数据来源、格式说明等"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t("div",X,[l(i,{type:"primary",loading:b.value,disabled:b.value,onClick:z},{default:s(()=>[d(k(b.value?"正在知识追踪分析...":"开始知识追踪分析"),1)]),_:1},8,["loading","disabled"])])]),_:1}),t("div",Y,[l(i,{type:"primary",onClick:B},{default:s(()=>e[8]||(e[8]=[d("保存")])),_:1}),l(i,{type:"success",onClick:D},{default:s(()=>e[9]||(e[9]=[d("预览")])),_:1}),l(i,{type:"warning",onClick:I},{default:s(()=>e[10]||(e[10]=[d("导出")])),_:1}),l(i,{onClick:P},{default:s(()=>e[11]||(e[11]=[d("重置")])),_:1})]),l(q,{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=m=>w.value=m),title:"知识追踪分析结果预览",width:"90%","destroy-on-close":"",onOpened:j},{default:s(()=>[t("div",Z,[e[20]||(e[20]=t("h2",null,"知识追踪分析结果",-1)),l(S,{column:2,border:""},{default:s(()=>[l(u,{label:"分析时间"},{default:s(()=>[d(k(a.time),1)]),_:1}),l(u,{label:"学生人数"},{default:s(()=>e[12]||(e[12]=[d("30人")])),_:1}),l(u,{label:"知识追踪模型"},{default:s(()=>e[13]||(e[13]=[d("KANOptiKT")])),_:1}),l(u,{label:"追踪说明",span:2},{default:s(()=>[t("pre",ee,k(n.value.desc),1)]),_:1}),l(u,{label:"习题文件"},{default:s(()=>[n.value.exerciseFileList.length?(x(),g("span",te,"已上传文件")):(x(),g("span",le,"未上传"))]),_:1}),l(u,{label:"交互记录"},{default:s(()=>[n.value.logFileList.length?(x(),g("span",se,"已上传文件")):(x(),g("span",ae,"未上传"))]),_:1})]),_:1}),t("div",oe,[t("div",ne,[e[14]||(e[14]=t("h3",null,"知识点掌握动态变化",-1)),t("div",{ref_key:"lineChartRef",ref:R,class:"chart-box"},null,512)]),t("div",ie,[e[15]||(e[15]=t("h3",null,"未来表现预测",-1)),t("div",{ref_key:"barChartRef",ref:V,class:"chart-box"},null,512)])]),t("div",re,[t("div",de,[e[16]||(e[16]=t("h3",null,"学习路径规划建议",-1)),t("pre",ce,k(a.pathAdvice),1),t("div",{ref_key:"flowChartRef",ref:O,class:"chart-box"},null,512)]),t("div",ue,[e[17]||(e[17]=t("h3",null,"知识状态演变分析",-1)),t("div",{ref_key:"sankeyChartRef",ref:N,class:"chart-box"},null,512)])]),t("div",pe,[t("div",fe,[e[18]||(e[18]=t("h3",null,"学习效果评估",-1)),l($,{data:C.value?a.eval:a.eval.slice(0,5),border:"",size:"small",style:{width:"100%","margin-bottom":"0"}},{default:s(()=>[l(A,{prop:"name",label:"学生姓名",width:"120"}),l(A,{prop:"improve",label:"知识提升(%)",width:"120"}),l(A,{prop:"finalScore",label:"最终得分",width:"120"}),l(A,{prop:"effect",label:"学习效果"})]),_:1},8,["data"]),t("div",me,[l(i,{size:"small",onClick:e[3]||(e[3]=m=>C.value=!C.value)},{default:s(()=>[d(k(C.value?"收起":"展开全部"),1)]),_:1})])]),t("div",ve,[e[19]||(e[19]=t("h3",null,"教学活动优化建议",-1)),t("pre",_e,k(a.teachAdvice),1)])])])]),_:1},8,["modelValue"])])}}});const ge=Q(he,[["__scopeId","data-v-fde26a54"]]);export{ge as default};
