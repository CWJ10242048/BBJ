import{i as w}from"./index-18acf776.js";import{k as j,r as u,ai as K,b as i,o as v,c as y,d as l,f as t,w as a,h as d,t as h,E as x,ad as W}from"./index-8f7409db.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const H={class:"cognition-container"},J={style:{"text-align":"center","margin-top":"16px"}},Q={class:"button-group"},X={class:"preview-content"},Y={class:"desc-pre"},Z={class:"desc-pre"},$={key:0},ee={key:1},te={key:0},le={key:1},ae={class:"chart-row"},se={class:"chart-block"},oe={class:"chart-block"},ie={class:"chart-row"},ne={class:"chart-block"},re={class:"chart-block"},de={class:"chart-row"},ue={class:"chart-block"},ce={class:"chart-block"},pe=j({__name:"Cognition",setup(me){const k=u(),b=u(!1),f=u(!1),C=u(),L=u(),A=u(),F=u(),o=u({studentFileList:[],questionFileList:[],desc:""}),V={},s=K({time:"",model:"",conclusion:"",abilityDist:[],heatmap:{x:[],y:[],data:[]},radar:{indicators:[],values:[]},weakPoints:[],levels:[],pie:[]}),q=async()=>{if(!o.value.studentFileList.length||!o.value.questionFileList.length){x.error("请上传学生数据和题目信息文件");return}f.value=!0,setTimeout(async()=>{f.value=!1;const c=new Date;s.time=c.toLocaleString(),s.model="DINA模型",s.conclusion='大部分学生在"神经网络""支持向量机"等知识点掌握较弱，整体能力分布呈正态，建议针对薄弱知识点进行专项训练。',s.abilityDist=[{name:"40-49",value:2},{name:"50-59",value:5},{name:"60-69",value:8},{name:"70-79",value:10},{name:"80-89",value:7},{name:"90-100",value:3}],s.heatmap={x:["线性回归","逻辑回归","决策树","支持向量机","神经网络"],y:["张宇轩","李佳悦","王诗涵","赵梓萱","刘逸凡","陈静怡","杨子墨","黄雨桐","吴梦琪","郑晨曦"],data:Array.from({length:10},(e,n)=>Array.from({length:5},()=>Math.round(Math.random()*100)))},s.radar={indicators:[{name:"线性回归",max:100},{name:"逻辑回归",max:100},{name:"决策树",max:100},{name:"支持向量机",max:100},{name:"神经网络",max:100}],values:[80,70,65,60,55]},s.weakPoints=[{knowledge:"神经网络",mastery:55,question:"请简述反向传播算法的基本原理。"},{knowledge:"支持向量机",mastery:60,question:"什么是核函数？请举例说明其作用。"},{knowledge:"逻辑回归",mastery:62,question:"逻辑回归模型的损失函数是什么？"},{knowledge:"集成学习",mastery:65,question:"简述Bagging和Boosting的区别。"},{knowledge:"降维",mastery:68,question:"主成分分析（PCA）主要解决什么问题？"},{knowledge:"聚类",mastery:70,question:"K-means聚类算法的核心步骤有哪些？"}],s.levels=[{level:"A",count:3,desc:"能力突出，知识点掌握全面"},{level:"B",count:7,desc:"能力较好，部分知识点有待提升"},{level:"C",count:12,desc:"能力一般，存在明显薄弱环节"},{level:"D",count:8,desc:"能力较弱，需重点辅导"}],s.pie=[{name:"线性回归",value:80},{name:"逻辑回归",value:70},{name:"决策树",value:65},{name:"支持向量机",value:60},{name:"神经网络",value:55}],await W(),R(),x.success("诊断完成"),b.value=!0},4e3)};function R(){C.value&&w(C.value).setOption({tooltip:{},xAxis:{type:"category",data:s.abilityDist.map(e=>e.name)},yAxis:{type:"value"},series:[{type:"bar",data:s.abilityDist.map(e=>e.value),itemStyle:{color:"#409EFF"}}]}),L.value&&w(L.value).setOption({tooltip:{position:"top"},grid:{left:60,right:20,bottom:40,top:30},xAxis:{type:"category",data:s.heatmap.x,splitArea:{show:!0}},yAxis:{type:"category",data:s.heatmap.y,splitArea:{show:!0}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",left:"center",bottom:10},series:[{name:"掌握度",type:"heatmap",data:s.heatmap.data.flatMap((e,n)=>e.map((g,_)=>[_,n,g])),label:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0,0,0,0.5)"}}}]}),A.value&&w(A.value).setOption({tooltip:{},radar:{indicator:s.radar.indicators},series:[{type:"radar",data:[{value:s.radar.values,name:"平均能力"}],areaStyle:{opacity:.2},lineStyle:{color:"#67C23A"},itemStyle:{color:"#67C23A"}}]}),F.value&&w(F.value).setOption({tooltip:{trigger:"item"},legend:{top:"bottom"},series:[{name:"知识点掌握分布",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"outside",formatter:"{b}: {d}%"},data:s.pie}]})}const S=async()=>{x.success("保存成功")},O=()=>{s.time||q(),b.value=!0},z=()=>{R()},B=()=>{x.success("导出成功")},P=()=>{k.value&&(k.value.resetFields(),o.value={studentFileList:[],questionFileList:[],desc:""},Object.assign(s,{time:"",model:"",conclusion:"",abilityDist:[],heatmap:{x:[],y:[],data:[]},radar:{indicators:[],values:[]},weakPoints:[],levels:[],pie:[]}))};return(c,e)=>{const n=i("el-button"),g=i("el-upload"),_=i("el-form-item"),E=i("el-input"),M=i("el-form"),N=i("el-card"),p=i("el-descriptions-item"),U=i("el-descriptions"),m=i("el-table-column"),T=i("el-progress"),D=i("el-table"),I=i("el-dialog");return v(),y("div",H,[e[18]||(e[18]=l("h2",null,"认知诊断",-1)),t(N,{class:"box-card"},{header:a(()=>e[4]||(e[4]=[l("div",{class:"card-header"},[l("span",null,"数据上传与说明")],-1)])),default:a(()=>[t(M,{model:o.value,rules:V,ref_key:"formRef",ref:k,"label-width":"120px"},{default:a(()=>[t(_,{label:"学生答题数据"},{default:a(()=>[t(g,{class:"upload-demo","auto-upload":!1,"show-file-list":!0,"file-list":o.value.studentFileList,"onUpdate:fileList":e[0]||(e[0]=r=>o.value.studentFileList=r),accept:".xlsx,.csv"},{default:a(()=>[t(n,{size:"small",type:"primary"},{default:a(()=>e[5]||(e[5]=[d("上传学生数据")])),_:1})]),_:1},8,["file-list"])]),_:1}),t(_,{label:"题目信息文件"},{default:a(()=>[t(g,{class:"upload-demo","auto-upload":!1,"show-file-list":!0,"file-list":o.value.questionFileList,"onUpdate:fileList":e[1]||(e[1]=r=>o.value.questionFileList=r),accept:".xlsx,.csv,.doc,.docx,.pdf"},{default:a(()=>[t(n,{size:"small",type:"primary"},{default:a(()=>e[6]||(e[6]=[d("上传题目信息")])),_:1})]),_:1},8,["file-list"])]),_:1}),t(_,{label:"诊断说明"},{default:a(()=>[t(E,{modelValue:o.value.desc,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.desc=r),type:"textarea",rows:2,placeholder:"可填写诊断目的、数据来源、格式说明等"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),l("div",J,[t(n,{type:"primary",loading:f.value,disabled:f.value,onClick:q},{default:a(()=>[d(h(f.value?"正在认知诊断...":"开始认知诊断"),1)]),_:1},8,["loading","disabled"])])]),_:1}),l("div",Q,[t(n,{type:"primary",onClick:S},{default:a(()=>e[7]||(e[7]=[d("保存")])),_:1}),t(n,{type:"success",onClick:O},{default:a(()=>e[8]||(e[8]=[d("预览")])),_:1}),t(n,{type:"warning",onClick:B},{default:a(()=>e[9]||(e[9]=[d("导出")])),_:1}),t(n,{onClick:P},{default:a(()=>e[10]||(e[10]=[d("重置")])),_:1})]),t(I,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=r=>b.value=r),title:"认知诊断结果预览",width:"80%","destroy-on-close":"",onOpened:z},{default:a(()=>[l("div",X,[e[17]||(e[17]=l("h2",null,"认知诊断分析结果",-1)),t(U,{column:2,border:""},{default:a(()=>[t(p,{label:"诊断时间"},{default:a(()=>[d(h(s.time),1)]),_:1}),t(p,{label:"诊断模型"},{default:a(()=>[d(h(s.model),1)]),_:1}),t(p,{label:"诊断结论",span:2},{default:a(()=>[l("pre",Y,h(s.conclusion),1)]),_:1}),t(p,{label:"诊断说明",span:2},{default:a(()=>[l("pre",Z,h(o.value.desc),1)]),_:1}),t(p,{label:"学生数据文件"},{default:a(()=>[o.value.studentFileList.length?(v(),y("span",$,"已上传文件")):(v(),y("span",ee,"未上传"))]),_:1}),t(p,{label:"题目信息文件"},{default:a(()=>[o.value.questionFileList.length?(v(),y("span",te,"已上传文件")):(v(),y("span",le,"未上传"))]),_:1})]),_:1}),l("div",ae,[l("div",se,[e[11]||(e[11]=l("h3",null,"学生能力分布",-1)),l("div",{ref_key:"abilityChartRef",ref:C,class:"chart-box"},null,512)]),l("div",oe,[e[12]||(e[12]=l("h3",null,"知识点掌握热力图",-1)),l("div",{ref_key:"heatmapChartRef",ref:L,class:"chart-box"},null,512)])]),l("div",ie,[l("div",ne,[e[13]||(e[13]=l("h3",null,"学生能力雷达图",-1)),l("div",{ref_key:"radarChartRef",ref:A,class:"chart-box"},null,512)]),l("div",re,[e[14]||(e[14]=l("h3",null,"薄弱知识点",-1)),t(D,{data:s.weakPoints,border:"",size:"small",style:{width:"100%"}},{default:a(()=>[t(m,{prop:"knowledge",label:"知识点","min-width":"120"}),t(m,{prop:"question",label:"题目","min-width":"180"}),t(m,{prop:"mastery",label:"掌握率(%)",width:"180"},{default:a(r=>[t(T,{percentage:r.row.mastery,"stroke-width":16,color:"#67C23A","show-text":!0},null,8,["percentage"])]),_:1})]),_:1},8,["data"])])]),l("div",de,[l("div",ue,[e[15]||(e[15]=l("h3",null,"学生能力分层",-1)),t(D,{data:s.levels,border:"",size:"small",style:{width:"100%","margin-bottom":"0"}},{default:a(()=>[t(m,{prop:"level",label:"能力层级",width:"120"}),t(m,{prop:"count",label:"学生人数",width:"120"}),t(m,{prop:"desc",label:"层级描述"})]),_:1},8,["data"])]),l("div",ce,[e[16]||(e[16]=l("h3",null,"知识点掌握分布",-1)),l("div",{ref_key:"pieChartRef",ref:F,class:"chart-box"},null,512)])])])]),_:1},8,["modelValue"])])}}});const ye=G(pe,[["__scopeId","data-v-6603e7c7"]]);export{ye as default};
