import{k as At,r as f,p as Q,S as de,$ as zt,b as P,o as r,c as d,d as i,f as s,w as n,h as g,F as T,e as M,q as E,s as U,g as ke,t as b,V as Je,aa as Qe,ab as Et,E as h,ac as ce,ad as xe,x as $e,a5 as Ke,ae as Ft,G as Bt,af as It,A as jt}from"./index-8f7409db.js";import{F as Lt,P as _,H as B,A as qt,T as x,a as Ht}from"./index-b1b80416.js";import{_ as Ye}from"./_plugin-vue_export-helper-c27b6911.js";let y=(Ve=21)=>crypto.getRandomValues(new Uint8Array(Ve)).reduce((D,A)=>(A&=63,A<36?D+=A.toString(36):A<62?D+=(A-26).toString(36).toUpperCase():A>62?D+="-":D+="_",D),"");const Gt={class:"lesson-plan-container"},Wt={class:"upload-container"},Ot={key:0,class:"upload-section"},Xt={key:1,class:"history-section"},Jt={key:3,class:"file-info"},Qt={class:"file-name"},Kt={class:"card-header"},Yt={key:0,class:"ai-generated-tag"},Zt={class:"time-range-picker"},el={class:"number-control"},tl={class:"number"},ll={class:"number-control"},al={class:"number"},sl={class:"card-header"},nl={class:"header-right"},ol={class:"upload-container"},il={key:0},ul={key:1,class:"ai-resources"},rl={class:"resource-filters"},dl={key:0,class:"resource-list"},cl={class:"resource-info"},ml={class:"resource-details"},pl={class:"resource-tags"},vl={class:"resource-actions"},fl={key:1,class:"empty-resources"},gl={class:"used-resources"},yl={class:"section-header"},_l={class:"resource-name-cell"},bl={class:"card-header"},hl={class:"stages-list"},wl={class:"stage-header"},kl={class:"stage-body"},xl={class:"stage-time"},Vl={class:"timeline-bar"},Pl=["title","onDragstart","onDragover","onDrop"],Cl={class:"timeline-label"},Tl={key:0},Nl=["onMousedown"],Dl=["onMousedown"],Rl={class:"total-time-info"},Ml={class:"total-time"},Ul={style:{"margin-top":"18px","text-align":"right"}},$l={class:"content-header"},Sl={class:"left-section"},Al={key:0,class:"ai-generated-tag"},zl={class:"card-header"},El={class:"header-right"},Fl={key:0,class:"ai-generated-tag"},Bl={key:0,class:"analysis-section"},Il={class:"analysis-header"},jl={class:"total-score"},Ll={class:"score"},ql={class:"analysis-content"},Hl={class:"analysis-item-header"},Gl={class:"item-name"},Wl={class:"analysis-details"},Ol={key:0,class:"strengths"},Xl={key:1,class:"weaknesses"},Jl={key:2,class:"suggestions"},Ql={class:"button-group"},Kl={class:"preview-content"},Yl={key:0,class:"preview-list"},Zl={class:"stage-info"},ea={class:"stage-name"},ta={class:"stage-time"},la={class:"stage-desc"},aa={class:"resource-info"},sa={class:"resource-name"},na={class:"resource-desc"},oa={key:1},ia=At({__name:"LessonPlan",setup(Ve){const D=f(),A=f(!1),H=f(0),K=f(""),me=f(!1),l=f({courseName:"",topic:"",teacher:"李老师",class:"",startTime:(()=>{const t=new Date;return t.setHours(8,0,0,0),t})(),endTime:(()=>{const t=new Date;return t.setHours(9,40,0,0),t})(),lessonNumber:1,duration:2,objectives:"",keyPoints:"",difficultPoints:"",procedure:"",syllabus:"",importTime:0,lectureTime:0,interactionTime:0,practiceTime:0,summaryTime:0,teachingEffect:3,studentFeedback:"",teachingReflection:"",resources:[]}),Pe={courseName:[{required:!0,message:"请输入课程名称",trigger:"blur"}],topic:[{required:!0,message:"请输入课程主题",trigger:"blur"}],teacher:[{required:!0,message:"请输入授课教师",trigger:"blur"}],class:[{required:!0,message:"请输入授课班级",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"change"}],lessonNumber:[{required:!0,message:"请选择课次",trigger:"change"}],duration:[{required:!0,message:"请选择课时",trigger:"change"}],objectives:[{required:!0,message:"请输入教学目标",trigger:"blur"}],keyPoints:[{required:!0,message:"请输入教学重点",trigger:"blur"}],difficultPoints:[{required:!0,message:"请输入教学难点",trigger:"blur"}],procedure:[{required:!0,message:"请输入教学过程",trigger:"blur"}]},Ze=Q(()=>{const{courseName:t,topic:e,teacher:u,class:p,startTime:o,endTime:w,lessonNumber:v,duration:k,objectives:z,keyPoints:q,difficultPoints:F,procedure:R,syllabus:C,teachingEffect:we,studentFeedback:ie,teachingReflection:ue}=l.value,re=N=>N?N.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",G=N=>["很差","较差","一般","较好","很好"][N-1]||"未评价",Re=()=>m.value.map(N=>({name:N.name,time:N.time,desc:N.desc})),Me=()=>$.value.map(N=>({name:N.name,type:ne(N.type),description:N.description}));return{课程名称:t,课程主题:e,授课教师:u,授课班级:p,授课时间:`${re(o)} 至 ${re(w)}`,课次:`第${v}次课`,课时:`${k}课时（${k*45}分钟）`,教学大纲:C,教学目标:z,教学重点:q,教学难点:F,教学过程:R,教学环节:Re(),教学资源:Me(),教学效果:G(we),学生反馈:ie,教学反思:ue}}),Ce=f("upload"),O=f(""),Se=f([{id:"1",name:"计算机导论教学大纲",content:{courseName:"计算机导论",topic:"计算机系统概述",objectives:`1. 了解计算机的基本组成和工作原理
2. 掌握计算机系统的基本概念
3. 理解计算机的发展历程`,keyPoints:"计算机硬件组成、操作系统基本概念、计算机网络基础",difficultPoints:"计算机工作原理、数据表示与存储"}},{id:"2",name:"数据结构教学大纲",content:{courseName:"数据结构",topic:"线性表",objectives:`1. 掌握线性表的基本概念和操作
2. 理解顺序表和链表的实现原理
3. 能够应用线性表解决实际问题`,keyPoints:"线性表的定义、顺序存储结构、链式存储结构",difficultPoints:"链表的操作实现、时间复杂度分析"}},{id:"3",name:"操作系统教学大纲",content:{courseName:"操作系统",topic:"进程管理",objectives:`1. 理解进程的概念和状态转换
2. 掌握进程调度算法
3. 了解进程同步与通信机制`,keyPoints:"进程控制块、进程调度、进程同步",difficultPoints:"死锁问题、进程通信机制"}},{id:"4",name:"机器学习教学大纲",content:{courseName:"机器学习",topic:"线性回归",objectives:`1. 理解线性回归的基本原理和数学推导
2. 掌握最小二乘估计和梯度下降算法
3. 能够使用Python实现线性回归模型
4. 理解正则化在防止过拟合中的作用`,keyPoints:"线性回归模型、最小二乘估计、梯度下降、正则化",difficultPoints:"梯度下降的收敛性分析、多重共线性问题、正则化参数的选择"}}]),Te=f(!1),Y=f(!1),pe=f(!1),ve=f(!1),Z=f(0),X=f([{name:"教学目标",score:0,strengths:[],weaknesses:[],suggestions:[]},{name:"教学内容",score:0,strengths:[],weaknesses:[],suggestions:[]},{name:"教学步骤",score:0,strengths:[],weaknesses:[],suggestions:[]},{name:"教学资源",score:0,strengths:[],weaknesses:[],suggestions:[]}]),Ae=Q(()=>l.value.courseName&&l.value.topic&&l.value.objectives&&l.value.keyPoints&&l.value.difficultPoints&&l.value.procedure),et=async()=>{if(!Ae.value){h.warning("请先填写基本信息和教学内容");return}ve.value=!0;try{await new Promise(t=>setTimeout(t,2e3)),l.value.courseName==="机器学习"?(Z.value=4.3,X.value=[{name:"教学目标",score:4.5,strengths:["目标设置明确，涵盖知识、技能和态度三个维度","目标层次分明，从理解到应用再到创新","目标与课程主题紧密相关"],weaknesses:["部分目标表述可以更具体","缺少对实践环节的具体要求"],suggestions:["增加对模型评估指标的具体要求","补充对代码实现的具体规范"]},{name:"教学内容",score:4,strengths:["重点难点把握准确","内容组织逻辑清晰","理论与实践结合紧密"],weaknesses:["部分数学推导可以更详细","缺少对异常情况的处理说明"],suggestions:["补充梯度下降收敛性证明","增加对数据异常处理的讲解"]},{name:"教学步骤",score:4.2,strengths:["时间分配合理","环节设计完整","注重学生实践"],weaknesses:["案例分析时间可以适当延长","缺少对学习效果的即时反馈"],suggestions:["增加课堂小测验环节","添加学生互评环节"]},{name:"教学资源",score:4.3,strengths:["资源类型丰富","内容与课程匹配度高","实践性强"],weaknesses:["缺少在线练习平台","参考资料可以更丰富"],suggestions:["添加在线编程练习平台","补充更多实际案例"]}]):l.value.courseName==="数据结构"?(Z.value=4.2,X.value=[{name:"教学目标",score:4.3,strengths:["目标设置合理，符合课程要求","注重实践能力的培养","目标可衡量性强"],weaknesses:["缺少对算法复杂度的要求","目标可以更具体"],suggestions:["增加对时间复杂度分析的要求","补充对代码质量的具体标准"]},{name:"教学内容",score:4.1,strengths:["内容组织合理","重点难点突出","理论与实践结合"],weaknesses:["缺少对边界情况的处理","部分内容可以更深入"],suggestions:["补充异常处理的内容","增加对性能优化的讲解"]},{name:"教学步骤",score:4,strengths:["环节设计合理","时间分配得当","注重实践操作"],weaknesses:["练习时间可以适当延长","缺少互动环节"],suggestions:["增加小组讨论环节","添加代码评审环节"]},{name:"教学资源",score:4.4,strengths:["资源类型多样","内容实用性强","示例代码完整"],weaknesses:["缺少可视化工具","参考资料可以更新"],suggestions:["添加数据结构可视化工具","更新最新的参考资料"]}]):(Z.value=4,X.value=[{name:"教学目标",score:4,strengths:["目标设置合理","符合课程要求","层次分明"],weaknesses:["目标可以更具体","缺少量化指标"],suggestions:["增加具体的学习目标","补充可衡量的标准"]},{name:"教学内容",score:4,strengths:["内容组织合理","重点突出","逻辑清晰"],weaknesses:["部分内容可以更深入","缺少实践环节"],suggestions:["增加实践内容","补充更多案例"]},{name:"教学步骤",score:4,strengths:["环节完整","时间分配合理","循序渐进"],weaknesses:["互动环节可以增加","缺少反馈机制"],suggestions:["增加互动环节","添加即时反馈"]},{name:"教学资源",score:4,strengths:["资源类型多样","内容实用","易于获取"],weaknesses:["资源可以更丰富","缺少在线资源"],suggestions:["补充在线学习资源","增加互动性资源"]}]),pe.value=!0,h.success("评估完成")}catch{h.error("评估失败，请重试")}finally{ve.value=!1}};de(O,t=>{if(t){const e=Se.value.find(u=>u.id===t);e&&e.content&&(l.value.courseName=e.content.courseName,l.value.topic=e.content.topic,l.value.objectives=e.content.objectives,l.value.keyPoints=e.content.keyPoints,l.value.difficultPoints=e.content.difficultPoints,l.value.syllabus=e.name,e.content.courseName==="机器学习"?(l.value.lessonNumber=4,l.value.duration=2,l.value.procedure=`1. 【复习旧知】（10分钟）
- 回顾上节课的线性回归基本概念
- 复习最小二乘估计的基本原理
- 检查学生对数学推导的理解程度

2. 【导入】（10分钟）
- 通过房价预测案例引入线性回归的应用场景
- 展示实际数据集，激发学习兴趣
- 引导学生思考如何建立预测模型

3. 【讲授】（45分钟）
- 详细讲解梯度下降算法的原理
  * 损失函数的定义和几何意义
  * 梯度下降的迭代过程
  * 学习率的选择和收敛性分析
- 介绍正则化方法
  * 过拟合问题的产生原因
  * 岭回归和Lasso的原理
  * 正则化参数的选择方法

4. 【案例分析】（20分钟）
- 使用Python实现线性回归模型
- 演示数据预处理和特征工程
- 展示模型训练和评估过程
- 分析不同参数对模型性能的影响

5. 【练习】（20分钟）
- 学生动手实现简单的线性回归模型
- 完成数据可视化和结果分析
- 教师巡视指导，解答疑问

6. 【总结】（10分钟）
- 总结本节课重点内容
- 强调梯度下降和正则化的应用
- 布置课后作业和预习任务`):e.content.courseName==="数据结构"?(l.value.lessonNumber=2,l.value.duration=2,l.value.procedure=`1. 【复习旧知】（10分钟）
- 回顾线性表的基本概念
- 复习顺序存储结构的特点
- 检查学生对基本操作的掌握情况

2. 【导入】（10分钟）
- 通过实际应用场景引入链表的概念
- 分析顺序表的局限性
- 引导学生思考新的存储结构需求

3. 【讲授】（45分钟）
- 详细讲解链表的实现原理
  * 单链表的结构和特点
  * 结点的定义和操作
  * 基本操作的实现方法
- 分析链表与顺序表的比较
  * 存储结构的差异
  * 操作效率的对比
  * 适用场景的选择

4. 【练习】（30分钟）
- 实现链表的基本操作
  * 创建和初始化链表
  * 插入和删除结点
  * 查找和遍历操作
- 完成课后习题
- 教师巡视指导，解答疑问

5. 【总结】（10分钟）
- 总结两种存储结构的特点
- 强调链表操作的关键点
- 布置课后作业和预习任务`):e.content.courseName==="操作系统"?(l.value.lessonNumber=3,l.value.duration=2,l.value.procedure=`1. 【复习旧知】（10分钟）
- 回顾进程的基本概念
- 复习进程状态转换
- 检查学生对进程控制块的理解

2. 【导入】（10分钟）
- 通过实际系统运行场景引入进程调度
- 分析多进程并发执行的问题
- 引导学生思考调度策略的重要性

3. 【讲授】（45分钟）
- 详细讲解进程调度算法
  * 先来先服务（FCFS）
  * 短作业优先（SJF）
  * 时间片轮转（RR）
  * 多级反馈队列（MLFQ）
- 分析各种算法的特点
  * 公平性和效率
  * 响应时间和周转时间
  * 适用场景的选择

4. 【课堂讨论】（20分钟）
- 讨论不同调度算法的适用场景
- 分析算法优缺点
- 探讨实际系统中的调度策略

5. 【练习】（20分钟）
- 模拟进程调度过程
- 计算各种调度指标
- 比较不同算法的性能

6. 【总结】（10分钟）
- 总结各种调度算法的特点
- 强调调度策略的选择原则
- 布置课后作业和预习任务`):(l.value.lessonNumber=1,l.value.duration=2,l.value.procedure=`1. 【复习旧知】（10分钟）
- 回顾上节课重点内容
- 检查学生掌握情况
- 解答学生疑问

2. 【导入】（10分钟）
- 引入本节课主题
- 激发学习兴趣
- 明确学习目标

3. 【讲授】（45分钟）
- 讲解核心知识点
- 分析重点难点
- 举例说明应用

4. 【练习】（20分钟）
- 课堂练习
- 互动讨论
- 教师指导

5. 【总结】（10分钟）
- 归纳重点内容
- 布置课后作业
- 预告下节课内容`),e.content.courseName==="机器学习"?m.value=[{id:y(),type:"review",name:"复习旧知",time:10,desc:"回顾上节课的线性回归基本概念和数学原理"},{id:y(),type:"import",name:"导入",time:10,desc:"通过实际案例引入线性回归的应用场景"},{id:y(),type:"lecture",name:"讲授",time:45,desc:"详细讲解最小二乘估计和梯度下降算法"},{id:y(),type:"case",name:"案例分析",time:20,desc:"分析实际数据集，演示模型训练过程"},{id:y(),type:"practice",name:"练习",time:20,desc:"学生动手实现简单的线性回归模型"},{id:y(),type:"summary",name:"总结",time:10,desc:"总结本节课重点，布置课后作业"}]:e.content.courseName==="数据结构"?m.value=[{id:y(),type:"review",name:"复习旧知",time:10,desc:"回顾线性表的基本概念"},{id:y(),type:"import",name:"导入",time:10,desc:"引入顺序表和链表的概念"},{id:y(),type:"lecture",name:"讲授",time:45,desc:"讲解顺序表和链表的实现原理"},{id:y(),type:"practice",name:"练习",time:30,desc:"实现基本的链表操作"},{id:y(),type:"summary",name:"总结",time:10,desc:"总结两种存储结构的优缺点"}]:e.content.courseName==="操作系统"?m.value=[{id:y(),type:"review",name:"复习旧知",time:10,desc:"回顾进程的基本概念"},{id:y(),type:"import",name:"导入",time:10,desc:"引入进程调度的问题"},{id:y(),type:"lecture",name:"讲授",time:45,desc:"讲解进程调度算法"},{id:y(),type:"discussion",name:"课堂讨论",time:20,desc:"讨论不同调度算法的适用场景"},{id:y(),type:"practice",name:"练习",time:20,desc:"模拟进程调度过程"},{id:y(),type:"summary",name:"总结",time:10,desc:"总结各种调度算法的特点"}]:m.value=[{id:y(),type:"review",name:"复习旧知",time:10,desc:S("review")},{id:y(),type:"import",name:"导入",time:10,desc:S("import")},{id:y(),type:"lecture",name:"讲授",time:45,desc:S("lecture")},{id:y(),type:"practice",name:"练习",time:20,desc:S("practice")},{id:y(),type:"summary",name:"总结",time:10,desc:S("summary")}],Te.value=!0,Y.value=!0,h.success("已根据教学大纲自动填充内容"))}});const tt=t=>{H.value=0,K.value="",O.value="";const e=setInterval(()=>{if(H.value<100)H.value+=20;else{clearInterval(e),K.value="success",l.value.syllabus=t.name;const u=ze(t.name);$.value.push({id:y(),name:t.name,type:u,description:`上传的${ne(u)}资源`,tags:["上传资源"],url:URL.createObjectURL(t.raw)}),h.success("上传成功")}},100)},ze=t=>{var p;const e=(p=t.split(".").pop())==null?void 0:p.toLowerCase();return{pdf:"doc",doc:"doc",docx:"doc",ppt:"ppt",pptx:"ppt",mp4:"video",jpg:"image",jpeg:"image",png:"image"}[e||""]||"doc"},lt=()=>{l.value.syllabus="",H.value=0,K.value="",O.value=""},at=t=>{const e=t.type==="application/pdf",u=t.type==="application/msword"||t.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document";return!e&&!u?(h.error("只能上传PDF或Word文件"),!1):!0},st=async()=>{if(D.value)try{await D.value.validate(),h.success("保存成功")}catch{h.error("请填写完整信息")}},nt=()=>{A.value=!0},ot=async()=>{if(!l.value.courseName||!l.value.topic){h.warning("请先填写课程名称和主题");return}me.value=!0;try{const t=new Lt({sections:[{properties:{},children:[new _({text:`${l.value.courseName}教案`,heading:B.HEADING_1,alignment:qt.CENTER,spacing:{after:400}}),new _({text:"一、基本信息",heading:B.HEADING_2,spacing:{before:400,after:200}}),new _({children:[new x({text:"课程名称：",bold:!0}),new x({text:l.value.courseName})]}),new _({children:[new x({text:"课程主题：",bold:!0}),new x({text:l.value.topic})]}),new _({children:[new x({text:"授课教师：",bold:!0}),new x({text:l.value.teacher})]}),new _({children:[new x({text:"授课班级：",bold:!0}),new x({text:l.value.class})]}),new _({children:[new x({text:"授课日期：",bold:!0}),new x({text:l.value.startTime?l.value.startTime.toLocaleDateString("zh-CN"):""})]}),new _({children:[new x({text:"授课时间：",bold:!0}),new x({text:l.value.startTime&&l.value.endTime?`${l.value.startTime.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})} - ${l.value.endTime.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}`:""})]}),new _({children:[new x({text:"课次：",bold:!0}),new x({text:`第${l.value.lessonNumber}次课`})]}),new _({children:[new x({text:"课时：",bold:!0}),new x({text:`${l.value.duration}课时（${l.value.duration*45}分钟）`})]}),new _({text:"二、教学目标",heading:B.HEADING_2,spacing:{before:400,after:200}}),...l.value.objectives?l.value.objectives.split(`
`).filter(o=>o.trim()).map(o=>new _({text:o,bullet:{level:0}})):[],new _({text:"三、教学重点",heading:B.HEADING_2,spacing:{before:400,after:200}}),...l.value.keyPoints?l.value.keyPoints.split(`
`).filter(o=>o.trim()).map(o=>new _({text:o,bullet:{level:0}})):[],new _({text:"四、教学难点",heading:B.HEADING_2,spacing:{before:400,after:200}}),...l.value.difficultPoints?l.value.difficultPoints.split(`
`).filter(o=>o.trim()).map(o=>new _({text:o,bullet:{level:0}})):[],new _({text:"五、教学环节",heading:B.HEADING_2,spacing:{before:400,after:200}}),...m.value.map(o=>[new _({children:[new x({text:`【${o.name}】`,bold:!0}),new x({text:`（${o.time}分钟）`})],spacing:{before:200}}),new _({text:o.desc||"暂无描述",indent:{left:400}})]).flat(),new _({text:"六、教学过程",heading:B.HEADING_2,spacing:{before:400,after:200}}),...l.value.procedure?l.value.procedure.split(`
`).filter(o=>o.trim()).map(o=>new _({text:o,indent:{left:o.startsWith("-")?400:o.startsWith("*")?800:0}})):[],new _({text:"七、教学资源",heading:B.HEADING_2,spacing:{before:400,after:200}}),...$.value.map(o=>[new _({children:[new x({text:`• ${o.name}`,bold:!0}),new x({text:`（${ne(o.type)}）`})]}),new _({text:`说明：${o.description||"暂无描述"}`,indent:{left:400}})]).flat(),new _({text:"八、教学反思与总结",heading:B.HEADING_2,spacing:{before:400,after:200}}),new _({children:[new x({text:"教学效果：",bold:!0}),new x({text:["很差","较差","一般","较好","很好"][l.value.teachingEffect-1]||"未评价"})]}),new _({children:[new x({text:"学生反馈：",bold:!0})]}),new _({text:l.value.studentFeedback||"暂无反馈",indent:{left:400}}),new _({children:[new x({text:"教学反思：",bold:!0})]}),new _({text:l.value.teachingReflection||"暂无反思",indent:{left:400}})]}]}),e=await Ht.toBlob(t),u=window.URL.createObjectURL(e),p=document.createElement("a");p.href=u,p.download=`${l.value.courseName}教案.docx`,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(u),h.success("导出成功")}catch(t){console.error("导出失败:",t),h.error("导出失败，请重试")}finally{me.value=!1}},it=()=>{D.value&&(D.value.resetFields(),l.value={courseName:"",topic:"",teacher:"李老师",class:"",startTime:(()=>{const t=new Date;return t.setHours(8,0,0,0),t})(),endTime:(()=>{const t=new Date;return t.setHours(9,40,0,0),t})(),lessonNumber:1,duration:2,objectives:"",keyPoints:"",difficultPoints:"",procedure:"",syllabus:"",importTime:0,lectureTime:0,interactionTime:0,practiceTime:0,summaryTime:0,teachingEffect:3,studentFeedback:"",teachingReflection:"",resources:[]},H.value=0,K.value="",O.value="",Te.value=!1,Y.value=!1,pe.value=!1,Z.value=0,X.value=X.value.map(t=>({...t,score:0,strengths:[],weaknesses:[],suggestions:[]})),$.value=[],se.value=[])},ut=()=>{const t=m.value.reduce((u,p)=>u+p.time,0),e=l.value.duration*45;t!==e&&ce.confirm(`当前总时间(${t}分钟)与课时时间(${e}分钟)不匹配，是否自动调整各环节时间？`,"时间调整",{confirmButtonText:"自动调整",cancelButtonText:"手动调整",type:"warning"}).then(()=>{oe(),h.success("已自动调整时间分配")}).catch(()=>{h.info("您可以手动调整各环节时间")})};de(()=>l.value.duration,(t,e)=>{t>0&&e>0&&ce.confirm("课时已更改，是否自动调整各环节时间？","时间调整",{confirmButtonText:"自动调整",cancelButtonText:"手动调整",type:"warning"}).then(()=>{oe(),h.success("已自动调整时间分配")}).catch(()=>{h.info("您可以手动调整各环节时间")})});const rt=()=>{const t=l.value.duration*45;if(m.value.length>0&&t>0){m.value=m.value.map(p=>{let o=0;switch(p.type){case"lecture":o=40;break;case"practice":case"interaction":o=20;break;case"review":case"import":case"summary":o=10;break;default:o=10}const w=Math.round(o/100*t);return{...p,time:w,percent:o}});const u=m.value.reduce((p,o)=>p+(o.time||0),0);if(u!==t){const p=t-u,o=m.value.find(w=>w.type==="lecture");o&&(o.time+=p,o.percent=Math.round(o.time/t*100))}}},Ee=t=>{if(t.url)window.open(t.url,"_blank");else{const e=URL.createObjectURL(t.raw);window.open(e,"_blank")}},dt=t=>{const e=$.value.findIndex(u=>u.name===t.name);e>-1&&($.value.splice(e,1),h.success("资源已移除"))},ct=t=>ce.confirm(`确定移除 ${t.name}？`),mt=()=>{h.warning("最多只能上传5个文件")},pt=Q(()=>{const t=l.value.duration*45;return m.value.map(e=>({id:e.id,name:e.name,time:e.time,color:vt[e.type]||"#BDBDBD",percent:Math.round(e.time/t*100)}))}),fe=[{label:"复习旧知",value:"review",desc:"回顾上节课内容，帮助学生温故知新。"},{label:"导入",value:"import",desc:"引入新课题，激发学生兴趣。"},{label:"讲授",value:"lecture",desc:"系统讲解本节课核心知识点。"},{label:"案例分析",value:"case",desc:"通过实际案例加深理解。"},{label:"小组合作学习",value:"group",desc:"学生分组合作，提升协作能力。"},{label:"课堂讨论",value:"discussion",desc:"围绕主题展开讨论，培养思辨能力。"},{label:"互动",value:"interaction",desc:"师生互动，答疑解惑。"},{label:"练习",value:"practice",desc:"通过练习巩固所学知识。"},{label:"课堂小测验",value:"quiz",desc:"检测学生对知识点的掌握情况。"},{label:"总结",value:"summary",desc:"归纳本节课内容，布置课后任务。"}],Fe=t=>{const e=fe.find(u=>u.value===t);return e?e.label:""},S=t=>{const e=fe.find(u=>u.value===t);return e?e.desc:""},vt={review:"#409EFF",import:"#9C27B0",lecture:"#67C23A",case:"#E6A23C",group:"#F56C6C",discussion:"#795548",interaction:"#00BCD4",practice:"#FF9800",quiz:"#8BC34A",summary:"#607D8B",custom:"#BDBDBD"},m=f([{id:y(),type:"review",name:"复习旧知",time:10,desc:S("review")},{id:y(),type:"import",name:"导入",time:10,desc:S("import")},{id:y(),type:"lecture",name:"讲授",time:60,desc:S("lecture")},{id:y(),type:"practice",name:"练习",time:30,desc:S("practice")},{id:y(),type:"summary",name:"总结",time:10,desc:S("summary")}]),ee=f(!1),I=f(""),ge=f(""),ft=()=>{let t="",e="";I.value==="custom"?(t=ge.value.trim()||"自定义环节",e=""):(t=Fe(I.value),e=S(I.value)),t&&(m.value.push({id:y(),type:I.value,name:t,time:0,desc:e}),oe(),ee.value=!1,I.value="",ge.value="",h.success("已添加新环节"))},gt=t=>{ce.confirm("确定要删除该环节吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.value.splice(t,1),oe(),h.success("已删除该环节")}).catch(()=>{})},yt=(t,e)=>{t.type!=="custom"?(t.name=Fe(t.type),t.desc=S(t.type)):(t.name="",t.desc="")},_t=Q(()=>m.value.reduce((t,e)=>t+(e.time||0),0));Q(()=>_t.value!==l.value.duration*45);const bt=["计算机科学与技术2201班","软件工程2202班","数据科学与大数据技术2201班","人工智能2301班"],j=f(!1),J={objectives:`| 维度 | 具体目标 |
|------|----------|
| **知识目标** | 1. 说出线性回归的模型最小二乘估计思想。<br>2. 理解正规方程与梯度下降两类求解方式及其数值特点。<br>3. 解释欠拟合、过拟合与正则化（岭回归 / Lasso）在回归中的作用。 |
| **技能目标** | 1. 能够独立使用 Python/NumPy 或 scikit-learn 训练一元和多元线性回归模型，并完成模型评估。<br>2. 能对给定数据集选择合适的特征缩放、交叉验证和正则化策略。 |
| **情感与态度目标** | 1. 形成"模型简单性 vs. 表达能力"平衡的工程思维。<br>2. 培养用数据与实验而非直觉作决策的科学态度。 |`,keyPoints:`损失函数 → 最优化：均方误差的由来、几何含义与凸优化特性。
解析解 vs. 数值解：正规方程与梯度下降的条件、效率、数值稳定性比较。
正则化：λ 的物理意义，岭回归与 L1 正则对参数的不同影响。`,difficultPoints:`| 难点 | 化解策略 |
|------|----------|
| **梯度下降的收敛性与学习率选择** | 动画记录 loss 曲线并评价收敛速度。 |
| **多重共线性引发的矩阵不可逆** | 通过可视化列空间、演示正规方程求解失败，再引入岭回归作为解决方案。 |
| **正则化超参数 λ 的调优** | 课堂现场用交叉验证网格搜索，展示"U 形"验证误差曲线，帮助学生直观体会。 |`};function te(t){return new Promise(e=>setTimeout(e,t))}const ht=async()=>{j.value=!0,l.value.objectives="",l.value.keyPoints="",l.value.difficultPoints="",l.value.procedure="",await te(2e3);for(let e=0;e<J.objectives.length;e++)l.value.objectives+=J.objectives[e],await xe(),await te(18);for(let e=0;e<J.keyPoints.length;e++)l.value.keyPoints+=J.keyPoints[e],await xe(),await te(18);for(let e=0;e<J.difficultPoints.length;e++)l.value.difficultPoints+=J.difficultPoints[e],await xe(),await te(18);let t="";m.value.forEach((e,u)=>{t+=`${u+1}. 【${e.name}】（${e.time}分钟）：${e.desc||"……"}
`}),l.value.procedure="";for(let e=0;e<t.length;e++)l.value.procedure+=t[e],await xe(),await te(10);j.value=!1,l.value.objectives&&l.value.keyPoints&&l.value.difficultPoints&&l.value.procedure&&(Y.value=!0,h.success("教学内容已自动生成"))};de([()=>l.value.objectives,()=>l.value.keyPoints,()=>l.value.difficultPoints,()=>l.value.procedure],([t,e,u,p])=>{!t&&!e&&!u&&!p&&(Y.value=!1)},{deep:!0});const Be=t=>t.getTime()<Date.now()-864e5,Ie=()=>{const t=[];for(let e=0;e<24;e++)(e<8||e>21)&&t.push(e);return t},je=t=>{const e=[];for(let u=0;u<60;u++)u%30!==0&&e.push(u);return e};de([()=>l.value.startTime,()=>l.value.endTime],([t,e])=>{if(t&&e){const u=e.getTime()-t.getTime(),p=Math.floor(u/(1e3*60));l.value.duration=Math.ceil(p/45)}});const le=f(-1),ye=f(-1),wt=(t,e)=>{var u;if(_e.value){t.preventDefault();return}le.value=e,(u=t.dataTransfer)==null||u.setData("text/plain",e.toString())},kt=(t,e)=>{t.preventDefault(),ye.value=e},xt=(t,e)=>{if(t.preventDefault(),le.value===-1||ye.value===-1)return;const u=[...m.value],[p]=u.splice(le.value,1);u.splice(e,0,p),m.value=u,ce.confirm("是否要重新自动分配各环节时间？","时间调整",{confirmButtonText:"自动分配",cancelButtonText:"保持不变",type:"info"}).then(()=>{oe(),h.success("已自动调整时间分配")}).catch(()=>{}),le.value=-1,ye.value=-1},Vt=()=>{le.value=-1,ye.value=-1};de(m,t=>{const e=t.reduce((u,p)=>u+(p.time||0),0);e>0&&(l.value.duration=Math.ceil(e/45))},{deep:!0});const _e=f(!1),Ne=f(""),be=f(0),Le=f(0),L=f(-1),qe=(t,e,u)=>{_e.value=!0,Ne.value=u,be.value=t.clientX,Le.value=m.value[e].time,L.value=e,document.addEventListener("mousemove",He),document.addEventListener("mouseup",Ge)},He=t=>{if(!_e.value)return;const e=document.querySelector(".timeline-bar");if(!e)return;const u=e.clientWidth,p=t.clientX-be.value,o=l.value.duration*45,w=p/u*100;if(Ne.value==="left"){if(L.value>0){const v=m.value[L.value-1],k=m.value[L.value],z=5/o*100;k.percent-w>=z&&v.percent+w>=z&&(k.percent-=w,v.percent+=w,k.time=Math.round(k.percent/100*o),v.time=Math.round(v.percent/100*o))}}else if(L.value<m.value.length-1){const v=m.value[L.value],k=m.value[L.value+1],z=5/o*100;v.percent+w>=z&&k.percent-w>=z&&(v.percent+=w,k.percent-=w,v.time=Math.round(v.percent/100*o),k.time=Math.round(k.percent/100*o))}be.value=t.clientX},Ge=()=>{_e.value=!1,Ne.value="",be.value=0,Le.value=0,L.value=-1,document.removeEventListener("mousemove",He),document.removeEventListener("mouseup",Ge)},De=f("upload"),he=f("all"),ae=f(!1),se=f([]),Pt=Q(()=>he.value==="all"?se.value:se.value.filter(t=>t.type===he.value)),We=t=>({ppt:Bt,doc:$e,video:It,image:jt})[t]||$e,Oe=t=>({ppt:"#FF9800",doc:"#2196F3",video:"#F44336",image:"#4CAF50"})[t]||"#909399",Ct=async()=>{ae.value=!0;try{await new Promise(t=>setTimeout(t,2e3)),se.value=[{id:"1",name:"线性回归基础概念PPT",type:"ppt",description:"包含线性回归的基本概念、数学原理和实际应用案例",tags:["基础概念","数学原理","案例分析"],url:"https://example.com/ppt1"},{id:"2",name:"梯度下降算法详解",type:"doc",description:"详细讲解梯度下降算法的原理、实现方法和优化技巧",tags:["算法","优化","实现"],url:"https://example.com/doc1"},{id:"3",name:"线性回归实战案例",type:"video",description:"通过实际案例演示线性回归模型的训练和评估过程",tags:["实战","案例","演示"],url:"https://example.com/video1"},{id:"4",name:"正则化方法图解",type:"image",description:"直观展示不同正则化方法对模型参数的影响",tags:["正则化","可视化","图解"],url:"https://example.com/image1"}],h.success("资源生成成功")}catch{h.error("资源生成失败")}finally{ae.value=!1}},Tt=t=>{h.info(`预览资源：${t.name}`)},Nt=t=>{if($.value.some(u=>u.id===t.id)){h.warning("该资源已经添加过了");return}$.value.push({...t,id:y()}),h.success(`已添加资源：${t.name}`)},$=f([]),ne=t=>({ppt:"课件",doc:"文档",video:"视频",image:"图片"})[t]||"其他",Xe=t=>({ppt:"warning",doc:"info",video:"danger",image:"success"})[t]||"",Dt=({row:t})=>"resource-table-row",Rt=t=>{const e=$.value.findIndex(u=>u.id===t.id);e>-1&&($.value.splice(e,1),h.success("资源已移除"))},Mt=()=>{h.info("资源排序功能开发中")};zt(()=>{l.value.duration<=0&&(l.value.duration=2),rt()});const Ut=t=>{if(t.status==="ready"){const e=ze(t.name);$.value.push({id:y(),name:t.name,type:e,description:`上传的${ne(e)}资源`,tags:["上传资源"],url:URL.createObjectURL(t.raw)}),h.success(`已添加资源：${t.name}`)}},oe=()=>{const t=l.value.duration*45;if(m.value.length===0)return;const e={review:1,import:1,lecture:4,case:2,practice:2,discussion:2,quiz:1,summary:1,custom:1};let u=m.value.reduce((w,v)=>w+(e[v.type]||1),0),p=t,o=m.value.length-1;if(m.value.forEach((w,v)=>{if(v===o)w.time=p;else{const k=e[w.type]||1,z=Math.round(k/u*t);w.time=Math.max(5,z),p-=w.time}}),m.value[o].time<5){let w=5-m.value[o].time;for(let v=0;v<o&&w>0;v++)if(m.value[v].time>5){let k=Math.min(w,m.value[v].time-5);m.value[v].time-=k,m.value[o].time+=k,w-=k}}$t()},$t=()=>{const t=l.value.duration*45;m.value.forEach(e=>{e.percent=e.time/t*100})},St=t=>({review:"#409EFF",import:"#9C27B0",lecture:"#67C23A",case:"#E6A23C",group:"#F56C6C",discussion:"#795548",interaction:"#00BCD4",practice:"#FF9800",quiz:"#8BC34A",summary:"#607D8B",custom:"#BDBDBD"})[t]||"#BDBDBD";return(t,e)=>{const u=P("el-radio-button"),p=P("el-radio-group"),o=P("el-button"),w=P("el-upload"),v=P("el-option"),k=P("el-select"),z=P("el-progress"),q=P("el-icon"),F=P("el-card"),R=P("el-input"),C=P("el-form-item"),we=P("el-date-picker"),ie=P("el-form"),ue=P("el-tag"),re=P("el-empty"),G=P("el-table-column"),Re=P("el-table"),Me=P("el-input-number"),N=P("el-dialog"),Ue=P("el-rate");return r(),d("div",Gt,[e[65]||(e[65]=i("h2",null,"教案生成",-1)),s(F,{class:"box-card"},{header:n(()=>e[27]||(e[27]=[i("div",{class:"card-header"},[i("span",null,"教学大纲")],-1)])),default:n(()=>[i("div",Wt,[s(p,{modelValue:Ce.value,"onUpdate:modelValue":e[0]||(e[0]=a=>Ce.value=a),size:"small",class:"syllabus-source"},{default:n(()=>[s(u,{label:"upload"},{default:n(()=>e[28]||(e[28]=[g("上传新大纲")])),_:1}),s(u,{label:"history"},{default:n(()=>e[29]||(e[29]=[g("选择历史大纲")])),_:1})]),_:1},8,["modelValue"]),Ce.value==="upload"?(r(),d("div",Ot,[s(w,{class:"upload-demo","auto-upload":!1,"show-file-list":!1,onChange:tt,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","before-upload":at},{tip:n(()=>e[31]||(e[31]=[i("div",{class:"el-upload__tip"},"支持PDF、Word文档格式",-1)])),default:n(()=>[s(o,{type:"primary"},{default:n(()=>e[30]||(e[30]=[g("上传教学大纲")])),_:1})]),_:1})])):(r(),d("div",Xt,[s(k,{modelValue:O.value,"onUpdate:modelValue":e[1]||(e[1]=a=>O.value=a),placeholder:"请选择历史教学大纲",style:{width:"100%"},filterable:""},{default:n(()=>[(r(!0),d(T,null,M(Se.value,a=>(r(),E(v,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])),H.value>0?(r(),E(z,{key:2,percentage:H.value,status:K.value,class:"upload-progress"},null,8,["percentage","status"])):U("",!0),l.value.syllabus?(r(),d("div",Jt,[s(q,null,{default:n(()=>[s(ke($e))]),_:1}),i("span",Qt,b(l.value.syllabus),1),s(o,{type:"danger",link:"",onClick:lt},{default:n(()=>[s(q,null,{default:n(()=>[s(ke(Ke))]),_:1})]),_:1})])):U("",!0)])]),_:1}),s(F,{class:"box-card"},{header:n(()=>[i("div",Kt,[e[32]||(e[32]=i("span",null,"教案基本信息",-1)),Te.value?(r(),d("span",Yt,"AI自动生成")):U("",!0)])]),default:n(()=>[s(ie,{model:l.value,rules:Pe,ref_key:"formRef",ref:D,"label-width":"120px"},{default:n(()=>[s(C,{label:"课程名称",prop:"courseName"},{default:n(()=>[s(R,{modelValue:l.value.courseName,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.courseName=a),placeholder:"请输入课程名称"},null,8,["modelValue"])]),_:1}),s(C,{label:"课程主题",prop:"topic"},{default:n(()=>[s(R,{modelValue:l.value.topic,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.topic=a),placeholder:"请输入课程主题"},null,8,["modelValue"])]),_:1}),s(C,{label:"授课教师",prop:"teacher"},{default:n(()=>[s(R,{modelValue:l.value.teacher,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.teacher=a),placeholder:"请输入授课教师"},null,8,["modelValue"])]),_:1}),s(C,{label:"授课班级",prop:"class"},{default:n(()=>[s(k,{modelValue:l.value.class,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.class=a),placeholder:"请选择或输入授课班级",filterable:"","allow-create":"","default-first-option":"",style:{width:"100%"}},{default:n(()=>[(r(),d(T,null,M(bt,a=>s(v,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),s(C,{label:"授课时间",prop:"date"},{default:n(()=>[i("div",Zt,[s(we,{modelValue:l.value.startTime,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.startTime=a),type:"datetime",placeholder:"开始时间","disabled-date":Be,"disabled-hours":Ie,"disabled-minutes":je},null,8,["modelValue"]),e[33]||(e[33]=i("span",{class:"time-separator"},"至",-1)),s(we,{modelValue:l.value.endTime,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.endTime=a),type:"datetime",placeholder:"结束时间","disabled-date":Be,"disabled-hours":Ie,"disabled-minutes":je},null,8,["modelValue"])])]),_:1}),s(C,{label:"课次",prop:"lessonNumber"},{default:n(()=>[i("div",el,[s(o,{size:"small",onClick:e[8]||(e[8]=a=>l.value.lessonNumber=Math.max(1,l.value.lessonNumber-1))},{default:n(()=>e[34]||(e[34]=[g("-")])),_:1}),i("span",tl,b(l.value.lessonNumber),1),s(o,{size:"small",onClick:e[9]||(e[9]=a=>l.value.lessonNumber=Math.min(32,l.value.lessonNumber+1))},{default:n(()=>e[35]||(e[35]=[g("+")])),_:1})])]),_:1}),s(C,{label:"课时",prop:"duration"},{default:n(()=>[i("div",ll,[s(o,{size:"small",onClick:e[10]||(e[10]=a=>l.value.duration=Math.max(1,l.value.duration-1))},{default:n(()=>e[36]||(e[36]=[g("-")])),_:1}),i("span",al,b(l.value.duration),1),s(o,{size:"small",onClick:e[11]||(e[11]=a=>l.value.duration=Math.min(4,l.value.duration+1))},{default:n(()=>e[37]||(e[37]=[g("+")])),_:1})])]),_:1})]),_:1},8,["model"])]),_:1}),s(F,{class:"box-card"},{header:n(()=>[i("div",sl,[e[40]||(e[40]=i("span",null,"教学资源",-1)),i("div",nl,[s(p,{modelValue:De.value,"onUpdate:modelValue":e[12]||(e[12]=a=>De.value=a),size:"small"},{default:n(()=>[s(u,{label:"upload"},{default:n(()=>e[38]||(e[38]=[g("上传资源")])),_:1}),s(u,{label:"ai"},{default:n(()=>e[39]||(e[39]=[g("AI推荐")])),_:1})]),_:1},8,["modelValue"])])])]),default:n(()=>[i("div",ol,[De.value==="upload"?(r(),d("div",il,[s(w,{class:"upload-demo","auto-upload":!1,"show-file-list":!0,multiple:"","on-preview":Ee,"on-remove":dt,"before-remove":ct,"on-exceed":mt,limit:5,"on-change":Ut,accept:".pdf,.doc,.docx,.ppt,.pptx,.mp4,.jpg,.jpeg,.png"},{tip:n(()=>e[42]||(e[42]=[i("div",{class:"el-upload__tip"},"支持PDF、Word、PPT、视频、图片等格式，最多上传5个文件",-1)])),default:n(()=>[s(o,{type:"primary"},{default:n(()=>e[41]||(e[41]=[g("上传教学资源")])),_:1})]),_:1})])):(r(),d("div",ul,[i("div",rl,[s(k,{modelValue:he.value,"onUpdate:modelValue":e[13]||(e[13]=a=>he.value=a),placeholder:"选择资源类型",style:{width:"200px"}},{default:n(()=>[s(v,{label:"全部",value:"all"}),s(v,{label:"课件",value:"ppt"}),s(v,{label:"文档",value:"doc"}),s(v,{label:"视频",value:"video"}),s(v,{label:"图片",value:"image"})]),_:1},8,["modelValue"]),s(o,{type:"primary",onClick:Ct,loading:ae.value},{default:n(()=>[g(b(ae.value?"生成中...":"生成推荐资源"),1)]),_:1},8,["loading"])]),se.value.length>0?(r(),d("div",dl,[(r(!0),d(T,null,M(Pt.value,a=>(r(),E(F,{key:a.id,class:"resource-card"},{default:n(()=>[i("div",cl,[s(q,{size:24,color:Oe(a.type)},{default:n(()=>[(r(),E(Je(We(a.type))))]),_:2},1032,["color"]),i("div",ml,[i("h4",null,b(a.name),1),i("p",null,b(a.description),1),i("div",pl,[(r(!0),d(T,null,M(a.tags,V=>(r(),E(ue,{size:"small",key:V},{default:n(()=>[g(b(V),1)]),_:2},1024))),128))])])]),i("div",vl,[s(o,{type:"primary",link:"",onClick:V=>Tt(a)},{default:n(()=>e[43]||(e[43]=[g("预览")])),_:2},1032,["onClick"]),s(o,{type:"success",link:"",onClick:V=>Nt(a)},{default:n(()=>e[44]||(e[44]=[g("使用")])),_:2},1032,["onClick"])])]),_:2},1024))),128))])):ae.value?U("",!0):(r(),d("div",fl,[s(re,{description:"点击生成按钮获取AI推荐资源"})]))])),i("div",gl,[i("div",yl,[e[46]||(e[46]=i("span",{class:"section-title"},"已使用资源",-1)),s(o,{type:"primary",link:"",onClick:Mt},{default:n(()=>[s(q,null,{default:n(()=>[s(ke(Ft))]),_:1}),e[45]||(e[45]=g(" 排序 "))]),_:1})]),$.value.length>0?(r(),E(Re,{key:0,data:$.value,style:{width:"100%"},"row-key":"id","row-class-name":Dt,size:"small","header-cell-style":{background:"#f5f7fa",color:"#606266",fontWeight:"normal",fontSize:"14px"}},{default:n(()=>[s(G,{type:"index",width:"40"}),s(G,{label:"资源名称","min-width":"180"},{default:n(({row:a})=>[i("div",_l,[s(q,{size:16,color:Oe(a.type)},{default:n(()=>[(r(),E(Je(We(a.type))))]),_:2},1032,["color"]),i("span",null,b(a.name),1)])]),_:1}),s(G,{prop:"type",label:"类型",width:"80"},{default:n(({row:a})=>[s(ue,{size:"small",type:Xe(a.type)},{default:n(()=>[g(b(ne(a.type)),1)]),_:2},1032,["type"])]),_:1}),s(G,{prop:"description",label:"描述","min-width":"180","show-overflow-tooltip":""}),s(G,{label:"操作",width:"120",fixed:"right"},{default:n(({row:a})=>[s(o,{type:"primary",link:"",size:"small",onClick:V=>Ee(a)},{default:n(()=>e[47]||(e[47]=[g("预览")])),_:2},1032,["onClick"]),s(o,{type:"danger",link:"",size:"small",onClick:V=>Rt(a)},{default:n(()=>e[48]||(e[48]=[g("移除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(r(),E(re,{key:1,description:"暂无已使用资源","image-size":60}))])])]),_:1}),s(F,{class:"box-card"},{header:n(()=>[i("div",bl,[e[50]||(e[50]=i("span",null,"教学环节时间分配",-1)),s(o,{type:"primary",size:"small",onClick:e[14]||(e[14]=a=>ee.value=!0)},{default:n(()=>e[49]||(e[49]=[g("增加环节")])),_:1})])]),default:n(()=>[i("div",hl,[(r(!0),d(T,null,M(m.value,(a,V)=>(r(),d("div",{key:a.id,class:"stage-card",style:Qe({background:St(a.type)+"20"})},[i("div",wl,[s(k,{modelValue:a.type,"onUpdate:modelValue":c=>a.type=c,placeholder:"选择环节",style:{width:"140px"},onChange:c=>yt(a,V)},{default:n(()=>[(r(),d(T,null,M(fe,c=>s(v,{key:c.value,label:c.label,value:c.value},null,8,["label","value"])),64)),s(v,{label:"自定义",value:"custom"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),a.type==="custom"?(r(),E(R,{key:0,modelValue:a.name,"onUpdate:modelValue":c=>a.name=c,placeholder:"输入环节名称",style:{width:"120px","margin-left":"8px"}},null,8,["modelValue","onUpdate:modelValue"])):U("",!0),s(o,{type:"danger",link:"",onClick:c=>gt(V),style:{"margin-left":"8px"}},{default:n(()=>[s(q,null,{default:n(()=>[s(ke(Ke))]),_:1})]),_:2},1032,["onClick"])]),i("div",kl,[i("div",xl,[s(Me,{modelValue:a.time,"onUpdate:modelValue":c=>a.time=c,min:1,max:180,step:1,"controls-position":"right",style:{width:"100px"},onChange:ut},null,8,["modelValue","onUpdate:modelValue"]),e[51]||(e[51]=i("span",{class:"time-unit"},"分钟",-1))]),s(R,{modelValue:a.desc,"onUpdate:modelValue":c=>a.desc=c,type:"textarea",rows:2,placeholder:"详细描述",style:{"margin-top":"8px"}},null,8,["modelValue","onUpdate:modelValue"])])],4))),128))]),i("div",Vl,[(r(!0),d(T,null,M(pt.value,(a,V)=>(r(),d("div",{key:a.id,class:"timeline-segment",style:Qe({width:a.percent+"%",background:a.color}),title:a.name+"："+a.time+"分钟",draggable:"true",onDragstart:c=>wt(c,V),onDragover:Et(c=>kt(c,V),["prevent"]),onDrop:c=>xt(c,V),onDragend:Vt},[i("span",Cl,[g(b(a.name),1),a.time?(r(),d("span",Tl,"("+b(a.time)+")",1)):U("",!0)]),i("div",{class:"resize-handle left",onMousedown:c=>qe(c,V,"left")},null,40,Nl),i("div",{class:"resize-handle right",onMousedown:c=>qe(c,V,"right")},null,40,Dl)],44,Pl))),128))]),i("div",Rl,[e[52]||(e[52]=g(" 总时间 ")),i("span",Ml,b(l.value.duration*45)+"分钟",1)]),s(N,{modelValue:ee.value,"onUpdate:modelValue":e[18]||(e[18]=a=>ee.value=a),title:"增加环节",width:"320px","close-on-click-modal":!1},{default:n(()=>[s(k,{modelValue:I.value,"onUpdate:modelValue":e[15]||(e[15]=a=>I.value=a),placeholder:"选择环节类型",style:{width:"100%"}},{default:n(()=>[(r(),d(T,null,M(fe,a=>s(v,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64)),s(v,{label:"自定义",value:"custom"})]),_:1},8,["modelValue"]),I.value==="custom"?(r(),E(R,{key:0,modelValue:ge.value,"onUpdate:modelValue":e[16]||(e[16]=a=>ge.value=a),placeholder:"输入自定义环节名称",style:{"margin-top":"12px"}},null,8,["modelValue"])):U("",!0),i("div",Ul,[s(o,{onClick:e[17]||(e[17]=a=>ee.value=!1)},{default:n(()=>e[53]||(e[53]=[g("取消")])),_:1}),s(o,{type:"primary",onClick:ft},{default:n(()=>e[54]||(e[54]=[g("确定")])),_:1})])]),_:1},8,["modelValue"])]),_:1}),s(F,{class:"box-card"},{header:n(()=>[i("div",$l,[i("div",Sl,[e[55]||(e[55]=i("span",{class:"section-title"},"教学内容",-1)),Y.value?(r(),d("span",Al,"AI自动生成")):U("",!0)]),s(o,{type:"primary",size:"small",onClick:ht,disabled:j.value},{default:n(()=>[g(b(j.value?"生成中...":"重新生成"),1)]),_:1},8,["disabled"])])]),default:n(()=>[s(ie,{model:l.value,rules:Pe,ref_key:"formRef",ref:D,"label-width":"120px"},{default:n(()=>[s(C,{label:"教学目标",prop:"objectives"},{default:n(()=>[s(R,{modelValue:l.value.objectives,"onUpdate:modelValue":e[19]||(e[19]=a=>l.value.objectives=a),type:"textarea",rows:5,placeholder:"请输入教学目标",readonly:j.value},null,8,["modelValue","readonly"])]),_:1}),s(C,{label:"教学重点",prop:"keyPoints"},{default:n(()=>[s(R,{modelValue:l.value.keyPoints,"onUpdate:modelValue":e[20]||(e[20]=a=>l.value.keyPoints=a),type:"textarea",rows:3,placeholder:"请输入教学重点",readonly:j.value},null,8,["modelValue","readonly"])]),_:1}),s(C,{label:"教学难点",prop:"difficultPoints"},{default:n(()=>[s(R,{modelValue:l.value.difficultPoints,"onUpdate:modelValue":e[21]||(e[21]=a=>l.value.difficultPoints=a),type:"textarea",rows:3,placeholder:"请输入教学难点",readonly:j.value},null,8,["modelValue","readonly"])]),_:1}),s(C,{label:"教学过程",prop:"procedure"},{default:n(()=>[s(R,{modelValue:l.value.procedure,"onUpdate:modelValue":e[22]||(e[22]=a=>l.value.procedure=a),type:"textarea",rows:5,placeholder:"请输入教学过程",readonly:j.value},null,8,["modelValue","readonly"])]),_:1})]),_:1},8,["model"])]),_:1}),s(F,{class:"box-card"},{header:n(()=>[i("div",zl,[e[56]||(e[56]=i("span",null,"教学反思与总结",-1)),i("div",El,[pe.value?(r(),d("span",Fl,"AI自动生成")):U("",!0),s(o,{type:"primary",size:"small",onClick:et,disabled:!Ae.value||ve.value},{default:n(()=>[g(b(ve.value?"分析中...":"AI分析"),1)]),_:1},8,["disabled"])])])]),default:n(()=>[s(ie,{model:l.value,rules:Pe,ref_key:"formRef",ref:D,"label-width":"120px"},{default:n(()=>[pe.value?(r(),d("div",Bl,[i("div",Il,[e[58]||(e[58]=i("h3",null,"AI分析报告",-1)),i("div",jl,[e[57]||(e[57]=g(" 教案总分：")),i("span",Ll,b(Z.value),1)])]),i("div",ql,[(r(!0),d(T,null,M(X.value,(a,V)=>(r(),d("div",{key:V,class:"analysis-item"},[i("div",Hl,[i("span",Gl,b(a.name),1),s(Ue,{modelValue:a.score,"onUpdate:modelValue":c=>a.score=c,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}分"},null,8,["modelValue","onUpdate:modelValue"])]),i("div",Wl,[a.strengths.length?(r(),d("div",Ol,[e[59]||(e[59]=i("h4",null,"优点：",-1)),i("ul",null,[(r(!0),d(T,null,M(a.strengths,(c,W)=>(r(),d("li",{key:W},b(c),1))),128))])])):U("",!0),a.weaknesses.length?(r(),d("div",Xl,[e[60]||(e[60]=i("h4",null,"不足：",-1)),i("ul",null,[(r(!0),d(T,null,M(a.weaknesses,(c,W)=>(r(),d("li",{key:W},b(c),1))),128))])])):U("",!0),a.suggestions.length?(r(),d("div",Jl,[e[61]||(e[61]=i("h4",null,"改进建议：",-1)),i("ul",null,[(r(!0),d(T,null,M(a.suggestions,(c,W)=>(r(),d("li",{key:W},b(c),1))),128))])])):U("",!0)])]))),128))])])):U("",!0),s(C,{label:"教学效果",prop:"teachingEffect"},{default:n(()=>[s(Ue,{modelValue:l.value.teachingEffect,"onUpdate:modelValue":e[23]||(e[23]=a=>l.value.teachingEffect=a),texts:["很差","较差","一般","较好","很好"],"show-text":""},null,8,["modelValue"])]),_:1}),s(C,{label:"学生反馈",prop:"studentFeedback"},{default:n(()=>[s(R,{modelValue:l.value.studentFeedback,"onUpdate:modelValue":e[24]||(e[24]=a=>l.value.studentFeedback=a),type:"textarea",rows:3,placeholder:"记录学生的反馈意见"},null,8,["modelValue"])]),_:1}),s(C,{label:"教学反思",prop:"teachingReflection"},{default:n(()=>[s(R,{modelValue:l.value.teachingReflection,"onUpdate:modelValue":e[25]||(e[25]=a=>l.value.teachingReflection=a),type:"textarea",rows:4,placeholder:"记录教学过程中的问题和改进建议"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Ql,[s(o,{type:"primary",onClick:st},{default:n(()=>e[62]||(e[62]=[g("保存")])),_:1}),s(o,{type:"success",onClick:nt},{default:n(()=>e[63]||(e[63]=[g("预览")])),_:1}),s(o,{type:"warning",loading:me.value,onClick:ot},{default:n(()=>[g(b(me.value?"导出中...":"导出"),1)]),_:1},8,["loading"]),s(o,{onClick:it},{default:n(()=>e[64]||(e[64]=[g("重置")])),_:1})]),s(N,{modelValue:A.value,"onUpdate:modelValue":e[26]||(e[26]=a=>A.value=a),title:"教案预览",width:"70%","destroy-on-close":""},{default:n(()=>[i("div",Kl,[i("h2",null,b(l.value.courseName)+"教案",1),(r(!0),d(T,null,M(Ze.value,(a,V)=>(r(),d("div",{key:V},[i("h3",null,b(V),1),Array.isArray(a)?(r(),d("div",Yl,[(r(!0),d(T,null,M(a,(c,W)=>(r(),d("div",{key:W,class:"preview-item"},[V==="教学环节"?(r(),d(T,{key:0},[i("div",Zl,[i("span",ea,b(c.name),1),i("span",ta,b(c.time)+"分钟",1)]),i("p",la,b(c.desc),1)],64)):V==="教学资源"?(r(),d(T,{key:1},[i("div",aa,[i("span",sa,b(c.name),1),s(ue,{size:"small",type:Xe(c.type)},{default:n(()=>[g(b(c.type),1)]),_:2},1032,["type"])]),i("p",na,b(c.description),1)],64)):U("",!0)]))),128))])):(r(),d("p",oa,b(a),1))]))),128))])]),_:1},8,["modelValue"])])}}});const ua=Ye(ia,[["__scopeId","data-v-5125621c"]]);const ra={class:"plan-container"},da={__name:"Plan",setup(Ve){return(D,A)=>(r(),d("div",ra,[s(ua)]))}},va=Ye(da,[["__scopeId","data-v-ae2b3899"]]);export{va as default};
